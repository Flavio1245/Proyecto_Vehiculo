<div id="todos" class="tab-pane fade">
    <h3>Todos los Vehículos</h3>
    <button id="refrescarBtn" class="btn btn-secondary mb-3">Refrescar</button>
    <table class="table">
        <thead>
            <tr>
                <th>Placa</th>
                <th>Marca</th>
                <th>Modelo</th>
                <th>Año</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody id="vehiculosTableBody">
            <% if (vehiculos && vehiculos.length > 0) { %>
                <% vehiculos.forEach(vehiculo => { %>
                    <tr>
                        <td><%= vehiculo.PLACA %></td>
                        <td><%= vehiculo.MARCA %></td>
                        <td><%= vehiculo.MODELO %></td>
                        <td><%= vehiculo.ANIO %></td>
                        <td><%= vehiculo.ESTADO %></td>
                    </tr>
                <% }) %>
            <% } else { %>
                <tr>
                    <td colspan="5">No hay vehículos registrados.</td>
                </tr>
            <% } %>
        </tbody>
    </table>
</div>

<script>
    document.getElementById('refrescarBtn').addEventListener('click', function() {
        fetch('/api/vehiculos') // Asegúrate de que esta ruta esté configurada para devolver todos los vehículos
            .then(response => response.json())
            .then(data => {
                const tableBody = document.getElementById('vehiculosTableBody');
                tableBody.innerHTML = ''; // Limpiar tabla

                if (data && data.length > 0) {
                    data.forEach(vehiculo => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${vehiculo.PLACA}</td>
                            <td>${vehiculo.MARCA}</td>
                            <td>${vehiculo.MODELO}</td>
                            <td>${vehiculo.ANIO}</td>
                            <td>${vehiculo.ESTADO}</td>
                        `;
                        tableBody.appendChild(row);
                    });
                } else {
                    const row = document.createElement('tr');
                    row.innerHTML = '<td colspan="5">No hay vehículos registrados.</td>';
                    tableBody.appendChild(row);
                }
            })
            .catch(err => {
                console.error('Error al refrescar la tabla:', err);
            });
    });
</script>
